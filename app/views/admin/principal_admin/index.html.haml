%p
	%h3.text-muted
		Período Académico: 
		= "#{@periodo_actual.id}"
%h5 Seleccione el Departamento:
%ul#pills-departamentos-tab.nav.nav-pills.mb-3{:role => "tablist"}
	- @departamentos.each_with_index do |dep,i|
		- dpto_activo = (session[:dpto_id].eql? dep.id) ? "active" : ""
		%li.nav-item
			= link_to dep.descripcion, "#dep_#{dep.id}", "data-toggle"=> "tab", onclick: "$.ajax({url: '/principal_admin/set_tab', data: {dpto_id: '#{dep.id}'}, dataType: 'json'});", class: "nav-link #{dpto_activo}"

#pills-departamentos-tabContent.tab-content
	- @departamentos.each_with_index do |dep,i|
		- dpto_activo = (session[:dpto_id].eql? dep.id) ? "active show" : ""
		.tab-pane.fade{"aria-labelledby" => "pills-home-tab", role: :tabpanel, class: dpto_activo, id: "dep_#{dep.id}"}

			- @catedras = dep.catedras_departamentos.sort_by{|cate| cate.orden}
			%h5 Seleccione la Cátedra:
			%ul#pills-catedras-tab.nav.nav-pills.mb-3{:role => "tablist"}
				- @catedras.each_with_index do |cat_dep,j|
					- cat = cat_dep.catedra
					- cat_activa = (session[:cat_id].eql? cat.id) ? "active" : ""
					%li.nav-item
						= link_to cat.descripcion, "#cat_#{dep.id}_#{cat.id}", "data-toggle"=> "tab", onclick: "$.ajax({url: '/principal_admin/set_tab', data: {cat_id: '#{cat.id}'}, dataType: 'json'});", class: "nav-link #{cat_activa}"

			#pills-catedras-tabContent.tab-content
				- @catedras.each_with_index do |cat_dep,j|
					- cat = cat_dep.catedra						
					- cat_activa = (session[:cat_id].eql? cat.id) ? "active show" : ""
					.tab-pane.fade{"aria-labelledby" => "pills-home-tab", role: :tabpanel, class: cat_activa, id: "cat_#{dep.id}_#{cat.id}"}
						- @asignaturas = cat.asignaturas.where(departamento_id: dep.id).sort_by{|a| a.orden}

						%h5 Seleccione la Asignatura:
						.row
							.col-2
								#v-pills-tab.nav.flex-column.nav-pills{"aria-orientation" => "vertical", :role => "tablist"}
									- @asignaturas.each_with_index do |mat,k|
										- mat_activa = (session[:mat_id].eql? mat.id) ? "active" : ""							
										= link_to "#mat_#{mat.id}", "data-toggle"=> "pill", class: "nav-link #{mat_activa}", "aria-controls" => "mat_#{mat.id}", :role => "tab", id: "mat_#{mat.id}-tab", onclick: "$.ajax({url: '/principal_admin/set_tab', data: {mat_id: '#{mat.id}'}, dataType: 'json'});"  do
											= mat.descripcion
											%span.badge.badge-info= mat.id_uxxi
											-if mat.secciones.where(:periodo_id => @periodo_actual.id).count < 1
												.mute
													%span.badge.badge-secondary
														inactiva

							.col-10
								#v-pills-tabContent.tab-content
									- @asignaturas.each_with_index do |mat,k|
										- @mat_activa = (session[:mat_id].eql? mat.id) ? "active show" : ""
										- @secciones = mat.secciones.where(:periodo_id => @periodo_actual.id)
										- @mat = mat
										= render partial: '/admin/asignaturas/panel_detalle'

-if (current_usuario.email.blank? or current_usuario.telefono_movil.blank? or current_usuario.telefono_habitacion.blank?)

	= render partial: 'usuario/datos_modal'
