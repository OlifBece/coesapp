
%table.table.table-striped.table-sm.table-hover.table-bordered.table-responsive-md.mt-3
  %thead
    %tr
      %th.span3 Roles
      %th Plan
      %th.span4 Nombre y Apellido
      %th Cédula
      - if current_admin.ninja? 
        %th Contraseña
      %th Correo Electrónico
      %th Móvil
      %th Opciones
  %tbody
    -@usuarios.each do |u| 
      %tr
        %td
          %table.table        
            - u.roles.each do |rol| 
              - if rol.eql? 'Estudiante'
                - u.estudiante.escuelas.each do |es| 
                  %tr
                    %td
                      -# planes = u.estudiante.planes.where(escuela_id: es.id).collect{|pa| pa.id}.to_sentence
                      = "Estudiante (#{es.descripcion})"
                      - if u.estudiante.inscrito? current_periodo.id, es.id

                        = simple_toggle_rounded "#{constancia_inscripcion_descargar_path(u)}?escuela_id=#{es.id}", 'I', 'Descargar Constancia de Inscripción' , 'success', 'download'

                        = simple_toggle_rounded "#{kardex_descargar_path(u)}?escuela_id=#{es.id}", 'K', 'Descargar Kardex' , 'success', 'download'

                        = btn_inscribir seleccionar_inscripcionseccion_path(u), 'Inscripción del periodo actual', 'Inscribir'

              - else
                %tr
                  %td= rol

        %td= u.ultimo_plan
        %td= link_to u.nombre_completo, u
        %td= u.ci
        - if current_admin.ninja?  
          %td= u.password
        %td= u.email
        %td= u.telefono_movil
        %td
          - if current_admin.maestros?            
            %b.tooltip-btn{'data_toggle'=>'tooltip', title: "Resetear Contraseña"}
              = link_to(resetear_contrasena_usuario_path(u), {data: {confirm: 'Esta acción asignará la cédula de identidad como contraseña, ¿está de acuerdo?'}, class: 'btn btn-sm btn-outline-primary'}) do
                = glyph 'lock'
                = glyph 'repeat'


:javascript

  $(document).ready(function(){
    $('.table').dataTable({
      scrollY: 410,
      searching: false,
      language: 
        {
          "sProcessing":     "Procesando...",
          "sLengthMenu":     "Mostrar _MENU_ registros",
          "sZeroRecords":    "No se encontraron resultados",
          "sEmptyTable":     "Ningún dato disponible en esta tabla",
          "sInfo":           "Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",
          "sInfoEmpty":      "Mostrando registros del 0 al 0 de un total de 0 registros",
          "sInfoFiltered":   "(filtrado de un total de _MAX_ registros)",
          "sInfoPostFix":    "",
          "sSearch":         "Buscar:",
          "sUrl":            "",
          "sInfoThousands":  ",",
          "sLoadingRecords": "Cargando...",
          "oPaginate": {
            "sFirst":    "Primero",
            "sLast":     "Último",
            "sNext":     "Siguiente",
            "sPrevious": "Anterior"
          },
          "oAria": {
            "sSortAscending":  ": Activar para ordenar la columna de manera ascendente",
            "sSortDescending": ": Activar para ordenar la columna de manera descendente"
          }
        }
      })
  });
